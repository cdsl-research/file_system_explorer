# file_system_explorer

VM内の特定内容を含むファイルを検索できるLinuxファイルシステム探索ツール

## 概要

VMのLinuxファイルシステムをスキャンし，アクセス可能なファイルの数をカウントするPythonスクリプトです．また，特定の内容を含むファイルを検索することもできます．

## 特徴

* ルートディレクトリから再帰的にファイルをスキャン
* 特定のディレクトリ（/proc, /dev, /sys, /run）を除外
* 個々のファイル処理と全体の処理にタイムアウトを設定
* 処理したディレクトリ数，ファイル数，タイムアウトしたファイル数を報告
* カスタム検索関数を使用して，特定の内容を含むファイルを検索可能

## ファイル構成と詳細説明

### 1. main.py

メインスクリプト．プログラムのエントリーポイントです．

主な機能：
- root権限チェック
- 除外するディレクトリの設定
- 全体の処理時間の計測
- カスタム検索関数の定義
- count_files関数の呼び出しと結果の表示

### 2. file_utils.py

ファイル処理関連の関数を含むモジュールです．

主な関数：

- file_generator(path, exclude_dirs)
    - 指定されたパスから再帰的にファイルを生成するジェネレータ関数
    - 除外するディレクトリをスキップ
- process_file(file_path, search_function)
    - 個々のファイルを処理し，指定された検索関数を適用
    - ファイルを32KBずつ読み込み，メモリ効率を考慮
- count_files(path, exclude_dirs, search_function)
    - ファイルシステムをスキャンし，条件に合うファイルをカウント
    - 各ファイル処理にタイムアウトを設定
    - 進捗状況とエラー情報を表示

### 3. timeout_utils.py

タイムアウト処理関連の関数を含むモジュールです．

主な内容：

- TimeoutExceptionクラス
    - タイムアウト発生時に投げられる例外
- time_limit(seconds)
    - 指定された秒数後にタイムアウトするコンテキストマネージャ
    - signal モジュールを使用してアラームを設定

## 実行結果
![image](https://github.com/user-attachments/assets/4668b0c8-29d0-47ad-b772-b11ac093284e)


## 注意事項

- このスクリプトはファイルシステム全体にアクセスするため，慎重に使用してください．
- 大規模なファイルシステムでは，処理に時間がかかる可能性があります．
- タイムアウト設定を適切に調整することで，処理の中断を防ぐことができます．
